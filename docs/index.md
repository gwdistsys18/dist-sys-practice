# What Happens When You Press Call
Dietrich Reidenbaugh | December 8, 2018

As of 2018, 95% of American adults own a cell phone, with 77% owning smartphones. Clearly it’s easy to get one and start using it - you tell the salesperson from your provider which phone you want, they enter a few numbers on the phone and in the computer, and next thing you know you can surf the web and make calls with a press of a button. While it’s a fairly simple system for the user, wirelessly connecting billions of phones around the world and to the Internet is not a small feat. Here we explore how this system works.

To gain some initial context, let’s consider a cell phone as a computer, which it is. Like most computers, it has a CPU, memory, and storage. It also has a battery, making it mobile. The user interface is implemented with input/output components much like a computer as well, with a display, speakers, microphones, and some kind of input mechanism such as a keypad, keyboard, or touch screen. However, what makes the cell phone a cell phone is its networking device, an antenna, which converts electrical signals to radio waves and vice versa.

The other end of these radio waves is a cell site such as a tower. Oftentimes, each site has three antennas pointing in different directions, and the area within the range of an antenna at the site is called a cell. To plan how the cells fit together, they are often thought of as hexagons, meaning each cell borders six other cells. Cell phone companies are usually permitted to use a certain range of frequencies. To avoid interference in areas of overlap at the borders, adjacent cells must use different frequency ranges.

Many users in the same cell can be connecting to the same site at the same time, so multiplexing techniques must be used to distinguish the signals. This can be done simply by dividing the frequencies or splitting the time, but more complicated and optimized techniques are often employed. Note that cell phones use two frequencies at once during a call: one for sending and one for receiving.

The antennas at the cell site are connected to radios which are part of the base transceiver station (BTS). Since there are so many of them, the BTS is designed to be as simple and cheap as possible. The base station controller (BSC), to which several BTSs are connected, has the database and processing to keep track of which phones are connected to which BTSs and decide when they should be switched.

The cell phone network is designed so that phones can move between cells without interrupting a call. A potential way to decide when to switch, in a process called a handover or handoff, would be for the phone to use whichever cell is providing the strongest signal at all times. However, near cell borders where the signal strengths are close, this could result in handovers occurring too frequently. Instead, each cell has a minimum signal threshold. When the BSC confirms that the phone’s signal strength with its current cell is too low, it will initiate a handover. Handoffs cannot occur instantaneously, so there are two types of handoffs: break-before-make, and make-before-break. Which one is used depends on the specific multiplexing scheme for the network. With a break-before-make handoff, the current connection is cut off while the new one is established. For analog calls, this could mean a gap of 200 milliseconds while the phone tunes to a new frequency. For digital calls, the gap is closer to 20 milliseconds, and since it is digital, techniques can be used to bridge over the gap making it unnoticeable. The make-before-break handoff, on the other hand, allows the phone to temporarily communicate with two BTSs at the same time, so there is no gap during the handover.

The next step for a call after the BSC is the mobile switching center (MSC) or mobile telephone switching office (MTSO), which is connected to all of the BSCs in a region. The MSC is critical for routing the call. It is connected to two databases called the home location register and the visited location register. The home location register (HLR) is a central database - and sometimes a single point of failure - for the mobile network that stores each phone’s subscriber information, billing information, and last known location area. The visited location register (VLR) contains information specifically for devices being served by an MSC. It has the information from the HLR but also additional details, such as encryption and power information, that are updated more frequently while a phone is in use.

The MSCs are all networked together. When a call is being placed, the MSC queries the HLR to determine the last known location area of the target phone. It then routes the call to the appropriate MSC, which in turn attempts to connect the call through the BSC and BTS to the device.

This works great for phones on the same mobile network. However, to make calls to phones using other providers or to landline phones, the MSCs are also connected to the existing landline telephone network, called the Public Switched Telephone Network (PSTN). Historically, every telephone call had to have its own electrical connection on copper wires, and operators at the central office for a local exchange carrier, the local telephone company, would manually connect two lines together when someone wished to place a call. If the caller wanted to place a long-distance call, the operators would work with interexchange carriers to connect the lines from the local exchange central offices at each end. Eventually, this system became automated. The North American Numbering Plan was developed to manage phone numbers, with the idea being that the area code could be used to route long-distance calls, the next three digits would refer to automatic switches owned by local exchange carriers, and the final four digits referred to individual lines on the switch.

Today, this basic format of phone numbers is still used. However, the system has become highly digitized and computerized, which has allowed flexibility in how it actually operates. For example, thousands of phone calls can be simultaneously transmitted on fiber-optic cables, so even though end users may have phones on analog lines, the calls are likely converted to digital signals in transit so they can share wires. In addition, phone companies were legally mandated to allow users to switch phone companies and keep their old numbers, meaning the phone numbers no longer refer to specific switches and lines. But the hierarchical setup, similar to the Internet Protocol, remains the same: there is no central database that knows every connection to connect two phone numbers. Instead, this task is distributed across hundreds of carriers and central offices which know the specific connections to make for a subset of phone numbers, but they must work with each other to connect phones on a wider scale.

![](docs/technical-report-diagram.png)


### Sources

* https://web.archive.org/web/20120417220750/http://www.privateline.com/Cellbasics/Cellbasics02.html 
* https://web.archive.org/web/20120511011603/http://www.privateline.com/levine/CELPCS4.PDF 
* http://www.cmm.gov.mo/eng/exhibition/secondfloor/MoreInfo/2_6_9_MobileSwitching.html 
* https://electronics.howstuffworks.com/cell-phone.htm/printable
* https://electronics.howstuffworks.com/telephone-country-codes.htm/printable 
* http://www.pewinternet.org/fact-sheet/mobile/
